<div class="client-profile">
  <div class="card shadow-sm border-0">
    <div class="card-header py-3" style="background-color: #517fb0; color: white;">
      <h2 class="m-0">My Information</h2>
    </div>

    <div class="card-body">
      <div *ngIf="userData; else loading">
        <div class="row">
          <div class="col-md-3 text-center mb-4 mb-md-0">
            <div class="profile-image-container mb-3">
              <img *ngIf="userData.userImagePath"
                   [src]="apiUrl + userData.userImagePath"
                   alt="Profile Image"
                   class="img-thumbnail rounded-circle"
                   style="width: 120px; height: 120px; object-fit: cover; border-color: #8cc2a7;">
              <div *ngIf="!userData.userImagePath" class="profile-placeholder rounded-circle"
                   style="background-color: #e9f5f0; width: 150px; height: 150px; display: flex; align-items: center; justify-content: center; margin: 0 auto;">
                <i class="fas fa-user fa-3x" style="color: #8cc2a7;"></i>
              </div>
            </div>
          </div>

          <div class="col-md-9">
            <div class="profile-details">
              <div class="detail-item mb-3 p-3 rounded" style="background-color: #f8f9fa;">
                <h5 class="detail-label" style="color: #517fb0;">Full Name</h5>
                <p class="detail-value">{{ userData.firstName }} {{ userData.lastName || '' }}</p>
              </div>

              <div class="detail-item mb-3 p-3 rounded" style="background-color: #f8f9fa;">
                <h5 class="detail-label" style="color: #517fb0;">Email</h5>
                <p class="detail-value">{{ userData.email }}</p>
              </div>

              <div class="detail-item mb-3 p-3 rounded" style="background-color: #f8f9fa;">
                <h5 class="detail-label" style="color: #517fb0;">Phone Number</h5>
                <p class="detail-value">{{ userData.phoneNumber || 'Not provided' }}</p>
              </div>

              <div class="detail-item mb-3 p-3 rounded" style="background-color: #f8f9fa;">
                <h5 class="detail-label" style="color: #517fb0;">Gender</h5>
                <p class="detail-value">{{ userData.gender || 'Not specified' }}</p>
              </div>

              <div class="detail-item mb-3 p-3 rounded" style="background-color: #f8f9fa;">
                <h5 class="detail-label" style="color: #517fb0;">Birth Date</h5>
                <p class="detail-value">{{ userData.birthDate || 'Not specified' }}</p>
              </div>

              <div class="detail-item mb-3 p-3 rounded" style="background-color: #f8f9fa;">
                <h5 class="detail-label" style="color: #517fb0;">Address</h5>
                <p class="detail-value">{{ userData.address || 'Not provided' }}</p>
              </div>
              <div class="detail-item mb-3 p-3 rounded" style="background-color: #f8f9fa;">
                <h5 class="detail-label" style="color: #517fb0;">Illness History</h5>
                <p class="detail-value">{{ userData.historyIllness || 'Not provided' }}</p>
              </div>
            </div>
          </div>
        </div>

 <div class="text-end mt-4 d-flex flex-row justify-content-end gap-4 align-items-end">
          <button class="btn "
                  style="background-color: #8cc2a7; color: white;"
                  (click)="editProfile()">
            <i class="fas fa-edit me-2"></i>Edit Profile
          </button>
  
        </div>
      </div>

      <ng-template #loading>
        <div class="text-center py-5">
          <div class="spinner-border" style="color: #517fb0;" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <p class="mt-3" style="color: #517fb0;">Loading profile...</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>

<app-edit-client-profile
  *ngIf="showEditModal"
  [userData]="userData"
  (onClose)="closeEditModal()"
  (onSave)="saveEditedProfile($event)">
</app-edit-client-profile>
