@if(isSent){
<app-confirm-mail
  [emailAddress]="Email.value"
  [message]="'We have sent a confirmation email to your email address. Please check your inbox.'"
></app-confirm-mail>
}@else {
<div class="login-container">
  <div class="login-card position-relative">
    <div class="back-home-container">
      <a
        (click)="goToHome()"
        class="back-home-button"
        aria-label="Back to Home"
      >
        <i class="bi bi-x-lg"></i>
      </a>
    </div>

    <div class="logo-section">
      <img
        src="assets/images/logo3.png"
        class="logo-img"
        alt="Soulvoura Logo"
      />
      <h1 class="logo-text">Solvoura</h1>
    </div>

    <div class="welcome-section">
      <h3 class="welcome-subtitle">Forget Password</h3>
    </div>

    <form [formGroup]="forgotPassForm" (ngSubmit)="submit()" class="auth-form">
      <div class="form-group">
        <label for="email">Email address</label>
        <div class="input-wrapper">
          <i class="fas fa-envelope input-icon"></i>
          <input
            id="email"
            type="email"
            formControlName="Email"
            placeholder="example@domain.com"
            [ngClass]="{
                'invalid': Email.touched && (Email.errors?.['required'] || Email.errors?.['email'] || Email.errors?.['server']),
                'valid': Email.touched && !Email.errors
              }"
          />
        </div>
        @if(errorValue){
        <div class="error-message">
          <i class="fas fa-exclamation-circle"></i> {{errorValue}}
        </div>
        } @if (Email.touched) { @if (Email.errors?.['required']) {
        <div class="error-message">
          <i class="fas fa-exclamation-circle"></i> Email is required
        </div>
        } @else if (Email.errors?.['email']) {
        <div class="error-message">
          <i class="fas fa-exclamation-circle"></i> Please enter a valid email
        </div>
        } @else if (Email.errors?.['server']) {
        <div class="error-message">
          <i class="fas fa-exclamation-circle"></i> Email not found
        </div>
        } }
      </div>

      <button
        type="submit"
        class="submit-button"
        [disabled]="forgotPassForm.invalid || isSubmitting"
      >
        @if (!isSubmitting) { Send Email } @else {
        <div class="spinner"></div>
        }
      </button>

      <button type="button" class="submit-button mt-1" (click)="goToLogin()">
        Back to Login
      </button>
    </form>
  </div>
</div>
}
