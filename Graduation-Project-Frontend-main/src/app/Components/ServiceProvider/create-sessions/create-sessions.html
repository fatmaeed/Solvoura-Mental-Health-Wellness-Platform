<div class="session-container gap-4 text-center">
  <div class="content-header mb-4">
    <h2 class="page-title" style="color: #2d4a61; font-weight: 600;">Add New Session</h2>
  </div>

  <div class="session-form-container shadow-sm">
    <form [formGroup]="sessionForm" (ngSubmit)="submit()" class="session-form">

      <div class="form-group">
        <label class="form-label">Start Date & Time</label>
        <input
          type="datetime-local"
          formControlName="startDateTime"
          class="form-control"
          [class.is-invalid]="startDateTime.touched && startDateTime.invalid"
        />
        @if (startDateTime.touched && startDateTime.invalid) {
          <div class="error-message">
            <i class="error-icon">⚠️</i>
            @if (startDateTime.hasError('required')) {
              <span>Start date is required</span>
            }
          </div>
        }
      </div>

      <div class="form-group">
        <label class="form-label">Duration (Minutes)</label>
        <input
          type="number"
          formControlName="durationInMinutes"
          class="form-control"
          [class.is-invalid]="durationInMinutes.touched && durationInMinutes.invalid"
        />
        @if (durationInMinutes.touched && durationInMinutes.invalid) {
          <div class="error-message">
            <i class="error-icon">⚠️</i>
            @if (durationInMinutes.hasError('required')) {
              <span>Duration is required</span>
            } @else if (durationInMinutes.hasError('min')) {
              <span>Duration must be at least 60 minutes</span>
            }
          </div>
        }
      </div>

      <div class="form-group">
        <label class="form-label">Session Type</label>
        <select
          class="form-select"
          formControlName="type"
          [class.is-invalid]="type.touched && type.invalid"
        >
          <option *ngFor="let t of typeOptions" [value]="t.value">{{ t.label }}</option>
        </select>
        @if (type.touched && type.invalid) {
          <div class="error-message">
            <i class="error-icon">⚠️</i>
            <span>Session type is required</span>
          </div>
        }
      </div>

      <div class="form-group">
        <label class="form-label">Repeat Session</label>
        <div class="repeat-options">
          @for (option of repeatOptions; track option.value) {
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                [value]="option.value"
                formControlName="repeatedFor"
                [id]="'repeat-' + option.value"
                [class.is-invalid]="repeatedFor.touched && repeatedFor.invalid"
              />
              <label class="form-check-label" [for]="'repeat-' + option.value">
                {{ option.label }}
              </label>
            </div>
          }
        </div>
        @if (repeatedFor.touched && repeatedFor.invalid) {
          <div class="error-message">
            <i class="error-icon">⚠️</i>
            <span>Please select a repeat option</span>
          </div>
        }
      </div>

      @if (repeatedForValue == Repeat.Daily || repeatedForValue == Repeat.Weekly) {
        <div class="form-group">
          <label class="form-label">End Date</label>
          <input
            type="date"
            formControlName="toDate"
            class="form-control"
          />
        </div>
      }

      <div class="form-actions">
        <button
          type="submit"
          class="submit-btn"
          [disabled]="sessionForm.invalid"
        >
          Create Session
        </button>
      </div>
    </form>
  </div>
</div>
